<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>COS - Menswear</title>
  <link rel="stylesheet" href="styles.css">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>

  <!-- Header -->
  <header>
    <nav class="navbar">
      <div class="nav-left">
        <a href="#">Women</a>
        <a href="#"><b>Men</b></a>
      </div>
      <div class="logo">
        <a href="home.html">COS</a>
      </div>
      <div class="nav-right">
        <i class='bx bx-search' id="search-icon" style="font-size: 22px;"></i>
        <i class='bx bx-user' style="font-size: 22px;"></i>
        <i class='bx bx-heart' style="font-size: 22px;"></i>
        <a href="cart.html" class="cart-icon" style="position: relative; text-decoration: none;">
          <i class='bx bx-shopping-bag' style="font-size: 22px; color: black;"></i>
          <span class="cart-count" style="position: absolute; top: -6px; right: -10px; background-color: red; color: white; font-size: 12px; padding: 2px 6px; border-radius: 50%;">0</span>
        </a>
        <span class="lang">EN/VN</span>
      </div>
    </nav>

    <!-- Search Box -->
<div class="search-box hidden">
  <input type="text" id="search-input" placeholder="Tìm kiếm sản phẩm..." />
</div>

    <!-- Danh mục -->
    <nav class="menu category-menu">
      <a href="#" data-category="all">ALL MENSWEAR</a>
      <a href="#" data-category="new">NEW ARRIVALS</a>
      <a href="#" data-category="knitwear">KNITWEAR</a>
      <a href="#" data-category="shirts">SHIRTS</a>
      <a href="#" data-category="trousers">TROUSERS</a>
    </nav>
  </header>

  <!-- Breadcrumb -->
  <div class="breadcrumb">
    <a href="home.html">HOME</a> &gt; <a href="#">MEN</a> &gt; <span>VIEW ALL</span>
    <a href="cart.html" style="margin-left:auto; text-decoration:none; color:#000; font-weight:bold;">&lt; BACK TO CART</a>
  </div>

  <!-- Product Grid -->
  <main class="product-grid">
    <p id="no-results" style="text-align: center; margin-top: 20px; display: none;">Không tìm thấy sản phẩm nào phù hợp.</p>


    <!-- Mỗi product-card có data-category -->
    <div class="product-card" data-category="new" data-name="Áo khoác da có nhiều túi" data-price="7290000" data-image="images/product01.jpg">
      <div class="image-container">
        <img src="images/product01.jpg" alt="Áo khoác da">
        <button class="add-to-cart-btn">Thêm vào giỏ</button>
      </div>
      <h3>Áo khoác da có nhiều túi</h3>
      <p>7.290.000 VND</p>
    </div>

    <div class="product-card" data-category="knitwear" data-name="Áo len cashmere" data-price="5290000" data-image="images/product02.jpg">
      <div class="image-container">
        <img src="images/knitwear02.jpg" alt="Áo len cashmere">
        <button class="add-to-cart-btn">Thêm vào giỏ</button>
      </div>
      <h3>Áo len cashmere</h3>
      <p>5.290.000 VND</p>
    </div>

    <div class="product-card" data-category="shirts" data-name="Áo blazer" data-price="3490000" data-image="images/product03.jpg">
      <div class="image-container">
        <img src="images/shirt01.jpg" alt="Áo blazer">
        <button class="add-to-cart-btn">Thêm vào giỏ</button>
      </div>
      <h3>Áo Sơ Mi</h3>
      <p>3.490.000 VND</p>
    </div>

    <div class="product-card" data-category="shirts" data-name="Áo Sơ Mi" data-price="6990000" data-image="images/product10.jpg">
      <div class="image-container">
        <img src="images/product10.jpg" alt="Áo sơ mi">
        <button class="add-to-cart-btn">Thêm vào giỏ</button>
      </div>
      <h3>Áo Sơ Mi</h3>
      <p>6.990.000 VND</p>
    </div>

    <div class="product-card" data-category="knitwear" data-name="Áo Len" data-price="2990000" data-image="images/product05.jpg">
      <div class="image-container">
        <img src="images/product05.jpg" alt="Áo len">
        <button class="add-to-cart-btn">Thêm vào giỏ</button>
      </div>
      <h3>Áo Len</h3>
      <p>2.990.000 VND</p>
    </div>

    <div class="product-card" data-category="trousers" data-name="Quần" data-price="4390000" data-image="images/product09.jpg">
      <div class="image-container">
        <img src="images/pant01.jpg" alt="Áo hoodie">
        <button class="add-to-cart-btn">Thêm vào giỏ</button>
      </div>
      <h3>Quần Tây </h3>
      <p>4.390.000 VND</p>
    </div>

    <div class="product-card" data-category="trousers" data-name="Quần" data-price="3590000" data-image="images/product07.jpg">
      <div class="image-container">
        <img src="images/pant02.jpg" alt="Blazer">
        <button class="add-to-cart-btn">Thêm vào giỏ</button>
      </div>
      <h3>Quần Tây </h3>
      <p>3.590.000 VND</p>
    </div>

    <div class="product-card" data-category="new" data-name="Áo Blazer Basic" data-price="1190000" data-image="images/product08.jpg">
      <div class="image-container">
        <img src="images/product08.jpg" alt="Áo basic">
        <button class="add-to-cart-btn">Thêm vào giỏ</button>
      </div>
      <h3>Áo Blazer Basic</h3>
      <p>1.190.000 VND</p>
    </div>

  </main>

  <!-- Footer -->
  <footer>
    <div class="footer-logo">COS</div>
    <hr class="footer-line" />
    <div class="footer-content">
      <div class="footer-col">
        <h4>The company</h4>
        <p>About</p>
        <p>Features</p>
        <p>Design and Craft</p>
        <p>Pinterest</p>
      </div>
      <div class="footer-col">
        <h4>Assistance</h4>
        <p>Contact us</p>
        <p>Payments</p>
        <p>FAQ</p>
      </div>
      <div class="footer-col">
        <h4>Legal</h4>
        <p>Privacy policy</p>
        <p>Cookie notice</p>
        <p>Cookie settings</p>
      </div>
      <div class="footer-col">
        <h4>Follow us</h4>
        <p>Facebook</p>
        <p>Instagram</p>
        <p>Tiktok</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>COS</p>
      <p>SHIPPING TO > VIETNAM (ENGLISH)</p>
    </div>
  </footer>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const cartCount = document.querySelector('.cart-count');
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    const loginPopup = document.getElementById("login-popup");
    const loginBtn = document.querySelector(".popup-btn");

    updateCartCount();

    // Gắn sự kiện cho nút trong popup
    if (loginBtn) {
      loginBtn.addEventListener("click", function () {
        window.location.href = "login.html";
      });
    }

    // Thêm sản phẩm vào giỏ hàng
    document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
      btn.addEventListener('click', function (event) {
        event.stopPropagation(); // Ngăn sự kiện click lan ra ngoài

        const isLoggedIn = localStorage.getItem("isLoggedIn") === "true";
        if (!isLoggedIn) {
          if (loginPopup) {
            loginPopup.classList.remove("hidden");
          }
          return;
        }

        const card = btn.closest('.product-card');
        const name = card.querySelector('h3').textContent;
        const rawPrice = card.querySelector('p').textContent;
        const price = parseInt(rawPrice.replace(/[^\d]/g, ''));
        const image = card.querySelector('img').getAttribute('src');

        const index = cart.findIndex(item => item.name === name);
        if (index !== -1) {
          cart[index].quantity += 1;
        } else {
          cart.push({ name, price, image, quantity: 1 });
        }

        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartCount();
        alert("Đã thêm vào giỏ hàng!");
      });
    });

    function updateCartCount() {
      const totalItems = cart.reduce((sum, item) => sum + (item.quantity || 1), 0);
      cartCount.textContent = totalItems;
    }

    // Lọc sản phẩm theo danh mục
    const menuLinks = document.querySelectorAll('.category-menu a');
    const productCards = document.querySelectorAll('.product-card');

    menuLinks.forEach(link => {
      link.addEventListener('click', function (e) {
        e.preventDefault();
        const selected = this.getAttribute('data-category');
        productCards.forEach(card => {
          const category = card.getAttribute('data-category');
          card.style.display = (selected === 'all' || selected === category) ? 'block' : 'none';
        });
      });
    });

    // Tìm kiếm sản phẩm
    const searchIcon = document.querySelector('.bx-search');
    const searchBox = document.querySelector('.search-box');
    const searchInput = document.getElementById('search-input');
    const noResultsMessage = document.getElementById('no-results');

    searchIcon.addEventListener('click', () => {
      searchBox.classList.toggle('hidden');
      searchInput.focus();
    });

    searchInput.addEventListener('input', () => {
      const keyword = searchInput.value.trim().toLowerCase();
      let hasResult = false;

      productCards.forEach(card => {
        const name = card.getAttribute('data-name').toLowerCase();
        const isMatch = name.includes(keyword);
        card.style.display = isMatch ? 'block' : 'none';
        if (isMatch) hasResult = true;
      });

      noResultsMessage.style.display = (!hasResult && keyword !== '') ? 'block' : 'none';
    });

    // Đóng popup khi click ra ngoài nội dung popup
    document.addEventListener("click", function (event) {
      if (loginPopup && !loginPopup.classList.contains("hidden")) {
        const popupBox = loginPopup.querySelector(".popup-box");
        if (popupBox && !popupBox.contains(event.target)) {
          loginPopup.classList.add("hidden");
        }
      }
    });
  });
</script>



  <!-- Popup yêu cầu đăng nhập -->
  <div id="login-popup" class="popup-overlay hidden">
    <div class="popup-box">
      <p>Vui lòng đăng nhập.</p>
      <button class="popup-btn">Đăng nhập</button>
    </div>
  </div>
</body>
</html>
